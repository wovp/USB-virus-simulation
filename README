# README 文件

## U盘病毒及其免疫程序的实现

### 项目简介
本项目旨在模拟U盘病毒的入侵和传播过程，并实现其免疫程序。病毒通过不断创建进程来消耗系统内存资源，最终导致系统性能下降。本文档详细介绍了项目的实验目的、内容、过程以及运行方法。

### 目录
1. [项目结构](#项目结构)
2. [实验目的](#实验目的)
3. [实验内容](#实验内容)
4. [实验过程](#实验过程)
5. [实验结果及分析](#实验结果及分析)
6. [运行方法](#运行方法)
7. [注意事项](#注意事项)

### 项目结构
```
U盘病毒项目/
│
├── WindowsProject1/
│   ├── main.cpp          # 主程序文件
│   ├── virus.cpp         # 病毒模拟逻辑
│   └── defense.cpp       # 防御程序逻辑
│
├── defanseU/
│   ├── autorun.inf       # 病毒自动运行文件
│   ├── virus.exe         # 病毒执行文件
│   └── defense.exe       # 防御执行文件
│
├── README.md             # 项目说明文件
└── 高志朋-20214141-实验二.doc  # 实验报告
```

### 实验目的
学习了解 `autorun.inf` 病毒及其工作原理，编程模拟病毒的入侵和传播，并实现U盘病毒的免疫程序，验证其效果。

### 实验内容
1. **U盘病毒和autorun.inf文件**：
   - 编写模拟U盘病毒，通过创建进程消耗系统资源。
   - 使用 `autorun.inf` 文件实现病毒的自动运行。

2. **U盘病毒免疫程序功能设计**：
   - 设计防御程序，检测并移除病毒，保护系统免受感染。

### 实验过程
#### 一、U盘病毒编写
1. **定时器模块**：
   - 使用定时器不断创建进程，模拟病毒行为。
   - 在 `wWinMain` 中调用。

2. **复制exe到系统目录并设置注册表**：
   - 将病毒文件复制到 `C:\Windows\System32` 目录。
   - 修改注册表，实现开机自启动。

3. **U盘操作**：
   - 将病毒文件复制到U盘根目录。
   - 创建 `autorun.inf` 文件，设置病毒文件自动运行。

#### 二、U盘防御代码编写
1. **监听U盘插入**：
   - 实现监听函数，检测U盘插入。
   - 在检测到U盘插入时，检查并移除病毒文件。

### 实验结果及分析
#### 一、U盘病毒展示
1. **在电脑中启动病毒，感染U盘**：
   - 感染前后对比系统目录和注册表的变化。
   - 病毒文件和 `autorun.inf` 文件成功复制到U盘。

2. **用感染的U盘插入不感染的电脑**：
   - 清除电脑的病毒影响，恢复 `System32` 目录。
   - 插入感染的U盘，展示病毒再次传播。

#### 二、U盘防护展示
- 展示防御程序检测并移除病毒文件的过程。

### 运行方法
1. 克隆本仓库到本地：
    ```bash
    git clone https://github.com/yourusername/USB-virus-simulation.git
    cd USB-virus-simulation
    ```
2. 进入 `WindowsProject1` 目录，编译并运行主程序：
    ```bash
    g++ -o virus main.cpp virus.cpp
    ./virus
    ```
3. 进入 `defanseU` 目录，编译并运行防御程序：
    ```bash
    g++ -o defense defense.cpp
    ./defense
    ```

### 注意事项
- **警告**：该程序会显著消耗系统资源，仅用于学习和研究目的。请勿在生产环境或重要系统中运行。
- 运行该程序前请保存所有重要工作，以防系统崩溃造成数据丢失。
- 请在受控环境中测试本程序，以避免对其他系统造成影响。

---

感谢您使用U盘病毒及其免疫程序的实现项目！希望对您的学习和研究有所帮助。


---
来自GPT4o